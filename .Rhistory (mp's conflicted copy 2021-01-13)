library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
mu
d2
d2l
buffer[1]
mu
coa[1]
xy[1]
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
mu
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
switch(mpar$move,
brw = {
biased_rw(n=1,
data,
xy = xy[i-1,],
coa = mpar$coa,
buffer = mpar$buffer,
rho = mpar$rho,
a = mpar$a,
b = s[i])
})
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
ds
ds[i,]
ds[i-1,]
xy[i,]
xy[i-1,]
xy[i-1,1]+ ds[i,1] + u[i]
xy[i-1,1]+ ds[i,1]
u[i]
data$u
data$u*3.6
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
xy
xy
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
xy
extract(data$land, rbind(xy))
mpar
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
xy
d2l <- extract(data$land, rbind(xy))
d2l
buffer[1]
d2l > buffer[1] | xy[1] < 300
mu <- atan2(coa[1] - xy[1], coa[2] - xy[2])
mu
phi <- rwrpcauchy(n, mu, rho)
phi
st
b
a
new.xy <- c(xy[1] + sin(phi) * st, xy[2] + cos(phi) * st)
new.xy
new.d2l <- extract(data$land, rbind(new.xy))
new.d2l
xy
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
xy[i-1,]
ds[i,]
u[i]
cbind(xy[i - 1, 1] + ds[i, 1] + u[i],
xy[i - 1, 2] + ds[i, 2] + v[i])
dx[i,1]
ds[i,1]
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, shelf = FALSE, w0 = 120))
xy
lines(xy, lwd=0.5, col="white")
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.5, coa = c(1200,2800), shelf = FALSE, w0 = 120))
lines(xy, lwd=0.5, col="red")
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, coa = c(1200,2800), shelf = FALSE, w0 = 120))
raster::plot(d$bathy, ylim=c(750,2800), xlim=c(400,2400))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
d$u
d$v
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.25, coa = c(1200,2800), shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.5, coa = c(1200,2800), shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, coa = c(1200,2800), shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
plot(w ~ date, foo$sim)
library(simsmolt)
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, coa = c(1200,2800), shelf = FALSE, w0 = 120))
plot(y ~ x, foo$sim, pch='.')
plot(y ~ x, foo$sim, pch='.', asp=1)
CircStats::rwrpcauchy(10000, mu=0, rho = 0)
CircStats::rwrpcauchy(10000, 0, 0)
?CircStats::rwrpcauchy
hist(CircStats::rwrpcauchy(10000, 0, 0))
hist(CircStats::rwrpcauchy(10000, 0, 0))
hist(CircStats::rwrpcauchy(10000, 0, 0), breaks = 50)
hist(CircStats::rwrpcauchy(10000, 0, 0), breaks = 100)
library(simsmolt)
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, move = "rw", coa = c(1200,2800), shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, move = "rw", coa = c(1200,2800), shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, move = "rw", coa = c(1200,2800), shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, move = "rw", coa = c(1200,2800), shelf = FALSE, w0 = 120))
raster::plot(d$bathy, ylim=c(750,2800), xlim=c(400,2400))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
foo <- sim_growth(N=1800, data = d, mpar = list(rho=0.8, move = "rw", coa = c(1200,2800), shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
45/180*pi
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
library(simsmolt)
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
raster::plot(d$bathy, ylim=c(750,2800), xlim=c(400,2400))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
foo$sim[1:10,]
raster::plot(d$bathy, ylim=c(1000,1500), xlim=c(750,1500))
lines(y ~ x, foo$sim, lwd=0.5, col = "red")
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
lines(y ~ x, foo$sim, lwd=0.5, col = "blue")
names(foo$sim)
plot(ts ~ date, foo$sim)
plot(w ~ ts, foo$sim)
plot(w ~ date, foo$sim)
foo <- sim_growth(N=1800, data = d, mpar = list(move = "rw", shelf = FALSE, w0 = 120))
plot(foo)
plot(foo, data=d)
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="bathy")
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="bathy", xlim=c(750,1500), ylim=c(750,1500))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", shelf = FALSE, w0 = 120))
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="ts", xlim=c(750,1500), ylim=c(750,1500))
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="uv", xlim=c(750,1500), ylim=c(750,1500))
foo <- sim_growth(N=1800, data = d, mpar = list(move = "crw", rho=0.95, shelf = FALSE, w0 = 120))
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="uv", xlim=c(750,1500), ylim=c(750,1500))
plot(foo, data=d, rec = FALSE, lwd = 0.6, raster="uv", xlim=c(750,2400), ylim=c(750,1500))
tmp = installed.packages()
installedpackages = as.vector(tmp[is.na(tmp[,"Priority"]), 1])
save(installedpackages, file="~/installed_packages.rda")
tmp
nrow(tmp)
ls()
library(simsmolt)
d <- sim_setup()
d
names(d)
d$u
plot(d$u)
library(raster)
library(tidyverse)
plot(d$u)
plot(d$v)
plot(d$bathy)
plot(d$v)
plot(d$bathy)
plot(d$v)
library(simsmolt)
library(simsmolt)
d <- sim_setup(ocean="wk")
search()
tmp <- lapply(1:52, function(i) {
ts <- raster(file.path(wk, paste0("temp_", i, ".grd")))
names(ts) <- paste0("week_",i)
ts
}) %>% brick()
sim_setup()
d <- sim_setup()
d
ls()
wk
tmp <- lapply(1:52, function(i) {
ts <- raster(file.path(wk, paste0("temp_", i, ".grd")))
names(ts) <- paste0("week_",i)
ts
}) %>% brick()
ts <- raster(file.path(wk, paste0("temp_", 1, ".grd")))
wk
file.path(wk, paste0("temp_", 1, ".grd"))
d <- sim_setup(ocean = "wk")
d <- sim_setup()
d$wk
d
moreconfig
config
ls()
wk
tmp <- lapply(1:2, function(i) {
ts <- raster(file.path(wk, paste0("temp_", i, ".grd")))
names(ts) <- paste0("week_",i)
ts
}) %>% brick()
file.path(wk, paste0("temp_", i, ".grd"))
file.path(wk, paste0("temp_", 1, ".grd"))
raster(file.path(wk, paste0("temp_", 1, ".grd")))
file.path(wk, "temp", paste0("temp_", 1, ".grd"))
raster(file.path(wk, "temp", paste0("temp_", 1, ".grd")))
tmp <- lapply(1:2, function(i) {
ts <- raster(file.path(wk, "temp", paste0("temp_", i, ".grd")))
names(ts) <- paste0("week_",i)
ts
}) %>% brick()
tmp
ocean
library(simsmolt)
d <- sim_setup(ocean = "wk")
ocean
eval(ocean)
deparse(substitute(ocean))
ocean
fp <- c(cl, m, wk)
fp
which(fp == ocean)
ocean
names(fp)
rm(fp)
fp <- list(cl = cl, m=m, wk=wk)
names(fo)
names(fp)
which(fp == ocean)
rm(fp)
fp
d <- sim_setup(ocean = "wk")
wk
library(simsmolt)
d <- sim_setup(ocean = "wk")
library(simsmolt)
d <- sim_setup(ocean = "wk")
library(simsmolt)
d <- sim_setup(ocean = "wk")
d
names(d)
plot(d$ts)
ts <- raster("../simdata/riops/woy_means/riops_t.grd")
ts
library(simsmolt)
ts <- raster("../simdata/riops/woy_means/riops_t.grd")
ts
plot(ts)
foo <- stack(ts)
foo
rm(ts, foo)
library(simsmolt)
d <- sim_setup(ocean = "wk")
names(d)
d$ts
plot(d$ts)
object.size(d$ts)
foo <- brick(d$ts)
object.size(foo)
foo[[5]]
plot(foo)
lubridate::week(date(2020,07,09))
lubridate::week(ISOdate(2020,07,09))
lubridate::week(ISOdate(2020,11,31))
lubridate::week(ISOdate(2020,11,30))
2760/24
lubridate::doy(ISOdate(2020,07,09))+115
lubridate::day(ISOdate(2020,07,09))+115
lubridate::day(ISOdate(2020,07,09))
?lubridate
lubridate::yday(ISOdate(2020,07,09))
lubridate::yday(ISOdate(2020,07,09)) + 115
as.Date("2020-07-09")+115
lubridate::week(ISOdate(2020,11,01))
ls()
foo
foo[NULL]
library(simsmolt)
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = c(25,45))
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = c(25,45))
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = c(25,45))
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = c(25,45))
stack(file.path(wk, "riops_t.grd")[wk.rng])
wk.rng
library(simsmolt)
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = c(25,45))
wk.rng
wk.rng <- 25:45
foo <- stack(file.path(wk, riops_t.grd))[wk.rng]
foo <- stack(file.path(wk, "riops_t.grd"))
fo
foo
foo[wk.rng]
foo[[1:2]]
out[["ts"]] <- stack(file.path(wk, "riops_t.grd"))[[wk.rng]] %>%
brick()
length(out$ts)
out$ts
plot(out$ts)
class(out$ts)
raster::plot(out$ts)
library(simsmolt)
d <- sim_setup(ocean = "wk", wk.rng = 26:45)
foo <- sim_growth(N=1000, data = d)
library(simsmolt)
foo <- sim_growth(N=1000, data = d)
ds
ds[1:3,]
names(d)
d$ocean
library(simsmolt)
foo <- sim_growth(N=1000, data = d)
data$ts
week(mpar$sdt + N * 3600)
mpar$sdt
week(mpar$start.dt + N * 3600)
mpar$start.dt
N
week(mpar$start.dt + i * 3600)
week(mpar$start.dt)
extract(data$ts[[week(mpar$start.dt + i * 3600)]], rbind(xy[i - 1, ]))
data$ts[[week(mpar$start.dt + i * 3600)]]
week(mpar$start.dt + i * 3600)
dadta$ts
data$ts
dim(data$ts)
names(data$ts)[1]
str_split(names(data$ts)[1], "_", simplify = TRUE)
str_split(names(data$ts)[1], "_", simplify = TRUE)[,2]
as.numeric(str_split(names(data$ts)[1], "_", simplify = TRUE)[,2])
?str_split
library(simsmolt)
library(simsmolt)
length(names(data$ts))
ls()
length(names(d$ts))
foo <- sim_growth(N=1000, data = d)
week(mpar$start.dt + i * 3600 - wk1)
wk1
mpar$start.dt + i * 3600
week(mpar$start.dt + i * 3600)
library(simsmolt)
foo <- sim_growth(N=1000, data = d)
library(simsmolt)
foo <- sim_growth(N=1000, data = d)
wk1
week(mpar$start.dt + i * 3600) - wk1
foo <- sim_growth(N=1000, data = d)
extract(data$ts[[week(mpar$start.dt + i * 3600) - wk1]], rbind(xy[i - 1, ]))
rbind)xy[i-1,]
rbind(xy[i-1,])
data$ts[[week(mpar$start.dt + i * 3600) - wk1]]
extract(data$ts[[week(mpar$start.dt + i * 3600) - wk1]], rbind(xy[i-1, ]))
extract(data$ts[[week(mpar$start.dt + i * 3600) - wk1]])
data$ts[[week(mpar$start.dt + i * 3600) - wk1]]
plot(data$ts[[week(mpar$start.dt + i * 3600) - wk1]])
raster::plot(data$ts[[week(mpar$start.dt + i * 3600) - wk1]])
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1)
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1) %>% plot()
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1) %>% dim()
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1) %>% extract(., rbind(xy[i-1, ]))
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1, drop = FALSE) %>% class()
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1, drop = TRUE) %>% class()
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1, drop = FALSE) %>% extract(., rbind(xy[i-1,]))
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1, drop = FALSE) %>% raster::extract(., rbind(xy[i-1,]))
raster::subset(data$ts, week(mpar$start.dt + i * 3600) - wk1, drop = TRUE) %>% raster::extract(., rbind(xy[i-1,]))
extract
?extract
rbind(xy[i-1,])
data.frame(xy[i-1,])
data.frame(x=xy[i-1,1], y=xy[i-1,2])
extract(data$ts[[1]], data.frame(x=xy[i-1,1], y=xy[i-1,2])
)
data$ts[[1]]
plot(data$ts[[1]])
raster::plot(data$ts[[1]])
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = 25:45)
foo <- sim_growth(N=1000, data = d)
data$ts[[week(mpar$start.dt + i * 3600) - wk1]]
extract(data$ts[[week(mpar$start.dt + i * 3600) - wk1]], rbind(xy[i-1,])
)
foo <- sim_growth(N=1000, data = d)
ts[i-1] <- extract(data$ts[[week(mpar$start.dt + i * 3600) - wk1]], rbind(xy[i - 1, ]))
ts[i-1]
foo <- sim_growth(N=1000, data = d, mpar(advect = FALSE))
library(simsmolt)
foo <- sim_growth(N=1000, data = d, mpar(advect = FALSE))
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE))
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE, move = "crw"))
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE, move = "rw"))
library(simsmolt)
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE, move = "crw"))
s[i]
fl
fl[i]
w[i]
ts[i-1]
data$ts
ts[i-1]
ts[i-1]-276
library(simsmolt)
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE))
library(simsmolt)
foo <- sim_growth(N=1000, data = d, mpar = list(advect = FALSE))
foo
plot(foo)
names(foo)
dim(foo$sim)
names(foo$sim)
plot(foo$ts)
dev.off()
foo$ts
foo$sim$ts
plot(ts ~ date, foo$sim)
plot(x ~ date, foo$sim)
plot(y ~ date, foo$sim)
plot(w ~ date, foo$sim)
plot(y ~ x, foo$sim)
plot(ts ~ date, foo$sim)
plot(ts ~ date, foo$sim, type='b')
?plot
class(foo)
plot(foo)
plot(foo, d)
?simsmolt.plot
?simsmolt::plot
?plot.simsmolt
plot(foo, data = d, raster = bathy, rec = FALSE)
names(d)
library(simsmolt)
plot(foo, data = d, raster = bathy)
bathy.c
raster
switch(raster,
bathy = {
ras <- bathy.c
},
uv = {
# if(m==0) ras <- calc(data$u, mean)
# else ras <- data$u[[m]]
#           ras <- calc(data$u, mean)
ras <- sqrt(data$u^2 + data$v^2) * 3.6
ras <- rasterToPoints(ras) %>% data.frame()
names(ras) <- c("x","y","z")
})
ras
bathy
data$bathy
raster
plot(foo, data = d, raster = "bathy")
library(simsmolt)
plot(foo, data = d, raster = "bathy", option = "B")
plot(foo, data = d, raster = "bathy", option = "E")
library(simsmolt)
ls()
d <- sim_setup(ocean="wk", wk.rng = 25:45)
foo <- sim_growth(N=2760, data = d, mpar = list(advect = FALSE, move = "crw"))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = FALSE, move = "crw"))
plot(foo, data = d, option = "E")
plot(foo, data = d, raster = "bathy", option = "E")
plot(foo, data = d, raster = "bathy", option = "E", xlim=c(800,1500), ylim=c(1100,2000))
plot(foo, data = d, raster = "bathy", lwd = 0.5, option = "E", xlim=c(800,1500), ylim=c(1100,2000))
library(simsmolt)
d <- sim_setup(ocean="wk", wk.rng = 25:45, uv = TRUE)
names(d)
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.5))
warnings()
library(simsmolt)
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.5))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.5))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.5))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.5))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, move = "brw", rho = 0.75))
plot(foo, data = d, raster = "bathy", lwd = 0.5, option = "E", xlim=c(800,1500), ylim=c(1100,2000))
plot(foo, data = d, raster = "bathy", lwd = 0.5, option = "E", xlim=c(300,1500), ylim=c(1100,3000))
plot(foo, data = d, raster = "bathy", lwd = 0.5, option = "E", xlim=c(300,2000), ylim=c(1100,3000))
foo <- sim_growth(N=2200, data = d, mpar = list(advect = TRUE, coa = c(1300,2500), move = "brw", rho = 0.5))
plot(foo, data = d, raster = "bathy", lwd = 0.5, option = "E", xlim=c(300,2000), ylim=c(1100,3000))
plot(foo, data = d, raster = "uv", lwd = 0.5, option = "E", xlim=c(300,2000), ylim=c(1100,3000))
ls()
